"use strict";(self.webpackChunkstar_wars_explorer=self.webpackChunkstar_wars_explorer||[]).push([[950],{8950:(R,g,a)=>{a.r(g),a.d(g,{MoviesModule:()=>B});var c=a(4655),t=a(7716),$=a(8002),p=a(1049),h=a(3190),f=a(8939),A=a(2340),D=a(1841);let m=(()=>{class e{constructor(s){this.http=s,this.baseUrl=A.N.starWarsApi.baseUrl}list(s=null){let i=`${this.baseUrl}/films`;return s&&(i=s),this.http.get(i)}getMovie(s){return this.http.get(`${this.baseUrl}/films/${s}`)}}return e.\u0275fac=function(s){return new(s||e)(t.LFG(D.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),M=(()=>{class e extends p.m1{constructor(s){super({movie:null,loading:!1}),this.movieService=s,this.movie$=this.select(({movie:i})=>i),this.loading$=this.select(({loading:i})=>i),this.setMovie=this.updater((i,o)=>Object.assign(Object.assign({},i),{movie:o})),this.setLoading=this.updater((i,o)=>Object.assign(Object.assign({},i),{loading:o})),this.getMovie=this.effect(i=>i.pipe((0,h.w)(o=>(this.setLoading(!0),this.movieService.getMovie(o).pipe((0,f.x)(()=>this.setLoading(!1)),(0,p._b)(r=>this.setMovie(r),r=>this.setMovie(null)))))))}}return e.\u0275fac=function(s){return new(s||e)(t.LFG(m))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var l=a(8583),u=a(8295),Z=a(9983);let O=(()=>{class e{constructor(){this.movie=null}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-movie-details-presentational"]],inputs:{movie:"movie"},decls:18,vars:4,consts:[["data-testid","title"],[1,"c-movie-details__fields"],["matInput","","readonly","","data-testid","director",3,"value"],["matInput","","readonly","","data-testid","producer",3,"value"],["matInput","","readonly","","data-testid","release",3,"value"]],template:function(s,i){1&s&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"div"),t.TgZ(4,"mat-form-field"),t.TgZ(5,"mat-label"),t._uU(6,"Director"),t.qZA(),t._UZ(7,"input",2),t.qZA(),t.qZA(),t.TgZ(8,"div"),t.TgZ(9,"mat-form-field"),t.TgZ(10,"mat-label"),t._uU(11,"Producer"),t.qZA(),t._UZ(12,"input",3),t.qZA(),t.qZA(),t.TgZ(13,"div"),t.TgZ(14,"mat-form-field"),t.TgZ(15,"mat-label"),t._uU(16,"Release date"),t.qZA(),t._UZ(17,"input",4),t.qZA(),t.qZA(),t.qZA()),2&s&&(t.xp6(1),t.Oqu(null==i.movie?null:i.movie.title),t.xp6(6),t.Q6J("value",null==i.movie?null:i.movie.director),t.xp6(5),t.Q6J("value",null==i.movie?null:i.movie.producer),t.xp6(5),t.Q6J("value",null==i.movie?null:i.movie.release_date))},directives:[u.KE,u.hX,Z.Nt],styles:[""],changeDetection:0}),e})();var d=a(4885);function b(e,n){1&e&&t._UZ(0,"mat-spinner",2),2&e&&t.Q6J("diameter",32)}let S=(()=>{class e{constructor(s,i){this.store=s,this.activatedRoute=i,this.movie$=this.store.movie$,this.loading$=this.store.loading$}ngOnInit(){this.store.getMovie(this.activatedRoute.paramMap.pipe((0,$.U)(s=>s.get("id"))))}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(M),t.Y36(c.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-movie-details-container"]],features:[t._Bn([M])],decls:4,vars:6,consts:[["data-testid","spinner",3,"diameter",4,"ngIf"],[3,"movie"],["data-testid","spinner",3,"diameter"]],template:function(s,i){1&s&&(t.YNc(0,b,1,1,"mat-spinner",0),t.ALo(1,"async"),t._UZ(2,"app-movie-details-presentational",1),t.ALo(3,"async")),2&s&&(t.Q6J("ngIf",t.lcZ(1,2,i.loading$)),t.xp6(2),t.Q6J("movie",t.lcZ(3,4,i.movie$)))},directives:[l.O5,O,d.$g],pipes:[l.Ov],styles:[""],changeDetection:0}),e})(),F=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-movie-details-page"]],decls:3,vars:0,consts:[[1,"container","h-100"],[1,"pt-4","h-100"]],template:function(s,i){1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"app-movie-details-container"),t.qZA(),t.qZA())},directives:[S],styles:[""],changeDetection:0}),e})();var C=a(7057),P=a(5435),T=a(3342);let L=(()=>{class e extends p.m1{constructor(s){super({movies:[],total:0,nextPage:null,previousPage:null,paginatorDisabled:!1,loading:!1}),this.movieService=s,this.movies$=this.select(({movies:i})=>i),this.total$=this.select(({total:i})=>i),this.nextPage$=this.select(({nextPage:i})=>i),this.previousPage$=this.select(({previousPage:i})=>i),this.paginatorDisabled$=this.select(({paginatorDisabled:i})=>i),this.loading$=this.select(({loading:i})=>i),this.setMovies=this.updater((i,o)=>Object.assign(Object.assign({},i),{movies:o})),this.setTotal=this.updater((i,o)=>Object.assign(Object.assign({},i),{total:o})),this.setPreviousPage=this.updater((i,o)=>Object.assign(Object.assign({},i),{previousPage:o})),this.setNextPage=this.updater((i,o)=>Object.assign(Object.assign({},i),{nextPage:o})),this.setPaginatorDisabled=this.updater((i,o)=>Object.assign(Object.assign({},i),{paginatorDisabled:o})),this.setLoading=this.updater((i,o)=>Object.assign(Object.assign({},i),{loading:o})),this.loadMovies=this.effect(i=>i.pipe((0,h.w)(o=>(this.setLoading(!0),this.movieService.list(null!=o?o:null).pipe((0,f.x)(()=>{this.setLoading(!1),this.setPaginatorDisabled(!1)}),(0,p._b)(r=>{this.setMovies(r.results),this.setTotal(r.count),this.setNextPage(r.next),this.setPreviousPage(r.previous)},r=>{this.setMovies([]),this.setTotal(0),this.setNextPage(null),this.setPreviousPage(null)})))))),this.nextPage=this.effect(i=>i.pipe((0,C.M)(this.nextPage$),(0,P.h)(([,o])=>null!==o),(0,T.b)({next:([,o])=>{this.setPaginatorDisabled(!0),o&&this.loadMovies(o)}}))),this.previousPage=this.effect(i=>i.pipe((0,C.M)(this.previousPage$),(0,P.h)(([,o])=>null!==o),(0,T.b)({next:([,o])=>{this.setPaginatorDisabled(!0),o&&this.loadMovies(o)}})))}}return e.\u0275fac=function(s){return new(s||e)(t.LFG(m))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var v=a(7746),j=a(2458);function J(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"mat-list-item",2),t.NdJ("click",function(){const r=t.CHM(s).$implicit;return t.oxw().clickedMovie.emit(r)}),t._UZ(1,"img",3),t.TgZ(2,"h3",4),t._uU(3),t.qZA(),t.qZA()}if(2&e){const s=n.$implicit;t.xp6(3),t.Oqu(null==s?null:s.title)}}let N=(()=>{class e{constructor(){this.movies=[],this.clickedMovie=new t.vpe}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-movie-list-presentational"]],inputs:{movies:"movies"},outputs:{clickedMovie:"movie"},decls:2,vars:1,consts:[[1,"c-list"],["class","c-list__item",3,"click",4,"ngFor","ngForOf"],[1,"c-list__item",3,"click"],["matListAvatar","","alt","avatar","src","./assets/images/avatar.png"],["matLine",""]],template:function(s,i){1&s&&(t.TgZ(0,"mat-list",0),t.YNc(1,J,4,1,"mat-list-item",1),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngForOf",i.movies))},directives:[v.i$,l.sg,v.Tg,v.eA,j.X2],styles:[""],changeDetection:0}),e})();var y=a(7082);function z(e,n){1&e&&(t.TgZ(0,"div",5),t._UZ(1,"mat-spinner",6),t.qZA()),2&e&&(t.xp6(1),t.Q6J("diameter",32))}let I=(()=>{class e{constructor(s,i){this.store=s,this.router=i,this.movies$=this.store.movies$,this.total$=this.store.total$,this.paginatorDisabled$=this.store.paginatorDisabled$,this.loading$=this.store.loading$}ngOnInit(){this.store.loadMovies()}onPageChange(s){Number(s.previousPageIndex)>s.pageIndex?this.store.previousPage():this.store.nextPage()}onMovie(s){const i=/.*\/(\d+)\/$/.exec(s.url);this.router.navigate(["movies",i[1]])}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(L),t.Y36(c.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-movie-list-container"]],features:[t._Bn([L])],decls:9,vars:14,consts:[[1,"h-100","d-flex","flex-column"],[1,"flex-grow",3,"movies","movie"],[1,"c-paginator"],["class","c-paginator__spinner","data-testid","spinner-wrapper",4,"ngIf"],[1,"c-paginator__paginator",3,"hidePageSize","pageSize","length","disabled","page"],["data-testid","spinner-wrapper",1,"c-paginator__spinner"],[3,"diameter"]],template:function(s,i){1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"app-movie-list-presentational",1),t.NdJ("movie",function(r){return i.onMovie(r)}),t.ALo(2,"async"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,z,2,1,"div",3),t.ALo(5,"async"),t.TgZ(6,"mat-paginator",4),t.NdJ("page",function(r){return i.onPageChange(r)}),t.ALo(7,"async"),t.ALo(8,"async"),t.qZA(),t.qZA(),t.qZA()),2&s&&(t.xp6(1),t.Q6J("movies",t.lcZ(2,6,i.movies$)),t.xp6(3),t.Q6J("ngIf",t.lcZ(5,8,i.loading$)),t.xp6(2),t.Q6J("hidePageSize",!0)("pageSize",10)("length",t.lcZ(7,10,i.total$))("disabled",t.lcZ(8,12,i.paginatorDisabled$)))},directives:[N,l.O5,y.NW,d.$g],pipes:[l.Ov],styles:[""],changeDetection:0}),e})();const Q=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-movie-list-page"]],decls:3,vars:0,consts:[[1,"container","h-100"],[1,"pt-4","h-100"]],template:function(s,i){1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"app-movie-list-container"),t.qZA(),t.qZA())},directives:[I],styles:[""],changeDetection:0}),e})()},{path:":id",component:F}];let Y=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.Bz.forChild(Q)],c.Bz]}),e})();var X=a(4466);const q=[v.ie,y.TU,u.lN,Z.c,d.Cq];let B=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[m],imports:[[X.m,...q,Y]]}),e})()}}]);