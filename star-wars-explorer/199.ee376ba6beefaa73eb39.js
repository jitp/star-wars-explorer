"use strict";(self.webpackChunkstar_wars_explorer=self.webpackChunkstar_wars_explorer||[]).push([[199],{4199:(I,d,a)=>{a.r(d),a.d(d,{PeopleModule:()=>B});var l=a(9992),P=a(7082),u=a(4885),$=a(4466),p=a(4655),e=a(7716),c=a(1049),f=a(3190),v=a(8939),Z=a(7057),C=a(5435),T=a(3342),D=a(2340),U=a(1841);let h=(()=>{class s{constructor(n){this.http=n,this.baseUrl=D.N.starWarsApi.baseUrl}list(n=null){let t=`${this.baseUrl}/people`;return n&&(t=n),this.http.get(t)}getPerson(n){return this.http.get(`${this.baseUrl}/people/${n}`)}}return s.\u0275fac=function(n){return new(n||s)(e.LFG(U.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})(),A=(()=>{class s extends c.m1{constructor(n){super({persons:[],total:0,nextPage:null,previousPage:null,paginatorDisabled:!1,loading:!1}),this.peopleService=n,this.persons$=this.select(({persons:t})=>t),this.total$=this.select(({total:t})=>t),this.nextPage$=this.select(({nextPage:t})=>t),this.previousPage$=this.select(({previousPage:t})=>t),this.paginatorDisabled$=this.select(({paginatorDisabled:t})=>t),this.loading$=this.select(({loading:t})=>t),this.setPersons=this.updater((t,o)=>Object.assign(Object.assign({},t),{persons:o})),this.setTotal=this.updater((t,o)=>Object.assign(Object.assign({},t),{total:o})),this.setPreviousPage=this.updater((t,o)=>Object.assign(Object.assign({},t),{previousPage:o})),this.setNextPage=this.updater((t,o)=>Object.assign(Object.assign({},t),{nextPage:o})),this.setPaginatorDisabled=this.updater((t,o)=>Object.assign(Object.assign({},t),{paginatorDisabled:o})),this.setLoading=this.updater((t,o)=>Object.assign(Object.assign({},t),{loading:o})),this.loadPersons=this.effect(t=>t.pipe((0,f.w)(o=>(this.setLoading(!0),this.peopleService.list(null!=o?o:null).pipe((0,v.x)(()=>{this.setLoading(!1),this.setPaginatorDisabled(!1)}),(0,c._b)(r=>{this.setPersons(r.results),this.setTotal(r.count),this.setNextPage(r.next),this.setPreviousPage(r.previous)},r=>{this.setPersons([]),this.setTotal(0),this.setNextPage(null),this.setPreviousPage(null)})))))),this.nextPage=this.effect(t=>t.pipe((0,Z.M)(this.nextPage$),(0,C.h)(([,o])=>null!==o),(0,T.b)({next:([,o])=>{this.setPaginatorDisabled(!0),o&&this.loadPersons(o)}}))),this.previousPage=this.effect(t=>t.pipe((0,Z.M)(this.previousPage$),(0,C.h)(([,o])=>null!==o),(0,T.b)({next:([,o])=>{this.setPaginatorDisabled(!0),o&&this.loadPersons(o)}})))}}return s.\u0275fac=function(n){return new(n||s)(e.LFG(h))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();var g=a(8583),x=a(2458);function O(s,i){if(1&s){const n=e.EpF();e.TgZ(0,"mat-list-item",2),e.NdJ("click",function(){const r=e.CHM(n).$implicit;return e.oxw().clickedPerson.emit(r)}),e._UZ(1,"img",3),e.TgZ(2,"h3",4),e._uU(3),e.qZA(),e.qZA()}if(2&s){const n=i.$implicit;e.xp6(3),e.Oqu(n.name)}}let S=(()=>{class s{constructor(){this.persons=[],this.clickedPerson=new e.vpe}}return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-people-list-presentational"]],inputs:{persons:"persons"},outputs:{clickedPerson:"person"},decls:2,vars:1,consts:[[1,"c-list"],["class","c-list__item",3,"click",4,"ngFor","ngForOf"],[1,"c-list__item",3,"click"],["matListAvatar","","alt","avatar","src","./assets/images/avatar.png"],["matLine",""]],template:function(n,t){1&n&&(e.TgZ(0,"mat-list",0),e.YNc(1,O,4,1,"mat-list-item",1),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngForOf",t.persons))},directives:[l.i$,g.sg,l.Tg,l.eA,x.X2],styles:[""],changeDetection:0}),s})(),F=(()=>{class s{constructor(n,t){this.store=n,this.router=t,this.persons$=this.store.persons$,this.total$=this.store.total$,this.paginatorDisabled$=this.store.paginatorDisabled$,this.loading$=this.store.loading$}ngOnInit(){this.store.loadPersons()}onPageChange(n){Number(n.previousPageIndex)>n.pageIndex?this.store.previousPage():this.store.nextPage()}onPerson(n){const t=/.*\/(\d+)\/$/.exec(n.url);this.router.navigate(["people",t[1]])}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(A),e.Y36(p.F0))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-people-list-container"]],features:[e._Bn([A])],decls:10,vars:16,consts:[[1,"h-100","d-flex","flex-column"],[1,"flex-grow",3,"persons","person"],[1,"c-paginator"],[1,"c-paginator__spinner"],["color","primary",3,"diameter"],[1,"c-paginator__paginator",3,"hidePageSize","pageSize","length","disabled","page"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"app-people-list-presentational",1),e.NdJ("person",function(r){return t.onPerson(r)}),e.ALo(2,"async"),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.ALo(5,"async"),e._UZ(6,"mat-spinner",4),e.qZA(),e.TgZ(7,"mat-paginator",5),e.NdJ("page",function(r){return t.onPageChange(r)}),e.ALo(8,"async"),e.ALo(9,"async"),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.Q6J("persons",e.lcZ(2,8,t.persons$)),e.xp6(3),e.ekj("c-paginator__spinner--hidden",!1===e.lcZ(5,10,t.loading$)),e.xp6(2),e.Q6J("diameter",32),e.xp6(1),e.Q6J("hidePageSize",!0)("pageSize",10)("length",e.lcZ(8,12,t.total$))("disabled",e.lcZ(9,14,t.paginatorDisabled$)))},directives:[S,u.$g,P.NW],pipes:[g.Ov],styles:[""],changeDetection:0}),s})(),j=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-people-list-page"]],decls:3,vars:0,consts:[[1,"container","h-100"],[1,"pt-4","h-100"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"app-people-list-container"),e.qZA(),e.qZA())},directives:[F],styles:[""],changeDetection:0}),s})();var J=a(8002);let y=(()=>{class s extends c.m1{constructor(n){super({person:null,loading:!1}),this.peopleService=n,this.person$=this.select(({person:t})=>t),this.loading$=this.select(({loading:t})=>t),this.setPerson=this.updater((t,o)=>Object.assign(Object.assign({},t),{person:o})),this.setLoading=this.updater((t,o)=>Object.assign(Object.assign({},t),{loading:o})),this.getPerson=this.effect(t=>t.pipe((0,f.w)(o=>(this.setLoading(!0),this.peopleService.getPerson(o).pipe((0,v.x)(()=>this.setLoading(!1)),(0,c._b)(r=>this.setPerson(r),r=>this.setPerson(null)))))))}}return s.\u0275fac=function(n){return new(n||s)(e.LFG(h))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac}),s})();var m=a(8295),L=a(9983);let M=(()=>{class s{constructor(){this.person=null}}return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-person-details-presentational"]],inputs:{person:"person"},decls:33,vars:7,consts:[[1,"c-person-details__fields"],["matInput","","readonly","",3,"value"]],template:function(n,t){1&n&&(e.TgZ(0,"h1"),e._uU(1),e.qZA(),e.TgZ(2,"div",0),e.TgZ(3,"div"),e.TgZ(4,"mat-form-field"),e.TgZ(5,"mat-label"),e._uU(6,"Height"),e.qZA(),e._UZ(7,"input",1),e.qZA(),e.qZA(),e.TgZ(8,"div"),e.TgZ(9,"mat-form-field"),e.TgZ(10,"mat-label"),e._uU(11,"Mass"),e.qZA(),e._UZ(12,"input",1),e.qZA(),e.qZA(),e.TgZ(13,"div"),e.TgZ(14,"mat-form-field"),e.TgZ(15,"mat-label"),e._uU(16,"Hair color"),e.qZA(),e._UZ(17,"input",1),e.qZA(),e.qZA(),e.TgZ(18,"div"),e.TgZ(19,"mat-form-field"),e.TgZ(20,"mat-label"),e._uU(21,"Skin color"),e.qZA(),e._UZ(22,"input",1),e.qZA(),e.qZA(),e.TgZ(23,"div"),e.TgZ(24,"mat-form-field"),e.TgZ(25,"mat-label"),e._uU(26,"Height"),e.qZA(),e._UZ(27,"input",1),e.qZA(),e.qZA(),e.TgZ(28,"div"),e.TgZ(29,"mat-form-field"),e.TgZ(30,"mat-label"),e._uU(31,"Birth year"),e.qZA(),e._UZ(32,"input",1),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.Oqu(null==t.person?null:t.person.name),e.xp6(6),e.Q6J("value",null==t.person?null:t.person.height),e.xp6(5),e.Q6J("value",null==t.person?null:t.person.mass),e.xp6(5),e.Q6J("value",null==t.person?null:t.person.hair_color),e.xp6(5),e.Q6J("value",null==t.person?null:t.person.skin_color),e.xp6(5),e.Q6J("value",null==t.person?null:t.person.gender),e.xp6(5),e.Q6J("value",null==t.person?null:t.person.birth_year))},directives:[m.KE,m.hX,L.Nt],styles:[""],changeDetection:0}),s})();function N(s,i){1&s&&e._UZ(0,"mat-spinner",2),2&s&&e.Q6J("diameter",32)}let Q=(()=>{class s{constructor(n,t){this.store=n,this.activatedRoute=t,this.person$=this.store.person$,this.loading$=this.store.loading$}ngOnInit(){this.store.getPerson(this.activatedRoute.paramMap.pipe((0,J.U)(n=>n.get("id"))))}}return s.\u0275fac=function(n){return new(n||s)(e.Y36(y),e.Y36(p.gz))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-person-details-container"]],features:[e._Bn([y])],decls:4,vars:6,consts:[[3,"diameter",4,"ngIf"],[3,"person"],[3,"diameter"]],template:function(n,t){1&n&&(e.YNc(0,N,1,1,"mat-spinner",0),e.ALo(1,"async"),e._UZ(2,"app-person-details-presentational",1),e.ALo(3,"async")),2&n&&(e.Q6J("ngIf",e.lcZ(1,2,t.loading$)),e.xp6(2),e.Q6J("person",e.lcZ(3,4,t.person$)))},directives:[g.O5,M,u.$g],pipes:[g.Ov],styles:[""],changeDetection:0}),s})();const z=[{path:"",component:j},{path:":id",component:(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-person-details-page"]],decls:3,vars:0,consts:[[1,"container","h-100"],[1,"pt-4","h-100"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"app-person-details-container"),e.qZA(),e.qZA())},directives:[Q],styles:[""],changeDetection:0}),s})()}];let Y=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[p.Bz.forChild(z)],p.Bz]}),s})();const X=[l.ie,P.TU,m.lN,L.c,u.Cq];let B=(()=>{class s{}return s.\u0275fac=function(n){return new(n||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({providers:[h],imports:[[...X,$.m,Y]]}),s})()}}]);