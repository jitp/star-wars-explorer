"use strict";(self.webpackChunkstar_wars_explorer=self.webpackChunkstar_wars_explorer||[]).push([[572],{1572:(q,d,l)=>{l.r(d),l.d(d,{PlanetsModule:()=>R});var p=l(4655),t=l(7716),c=l(1049),P=l(3190),f=l(8939),v=l(7057),C=l(5435),Z=l(3342),D=l(2340),A=l(1841);let u=(()=>{class e{constructor(a){this.http=a,this.baseUrl=D.N.starWarsApi.baseUrl}list(a=null){let n=`${this.baseUrl}/planets`;return a&&(n=a),this.http.get(n)}getPlanet(a){return this.http.get(`${this.baseUrl}/planets/${a}`)}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(A.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),L=(()=>{class e extends c.m1{constructor(a){super({planets:[],total:0,nextPage:null,previousPage:null,paginatorDisabled:!1,loading:!1}),this.planetService=a,this.planets$=this.select(({planets:n})=>n),this.total$=this.select(({total:n})=>n),this.nextPage$=this.select(({nextPage:n})=>n),this.previousPage$=this.select(({previousPage:n})=>n),this.paginatorDisabled$=this.select(({paginatorDisabled:n})=>n),this.loading$=this.select(({loading:n})=>n),this.setPlanets=this.updater((n,s)=>Object.assign(Object.assign({},n),{planets:s})),this.setTotal=this.updater((n,s)=>Object.assign(Object.assign({},n),{total:s})),this.setPreviousPage=this.updater((n,s)=>Object.assign(Object.assign({},n),{previousPage:s})),this.setNextPage=this.updater((n,s)=>Object.assign(Object.assign({},n),{nextPage:s})),this.setPaginatorDisabled=this.updater((n,s)=>Object.assign(Object.assign({},n),{paginatorDisabled:s})),this.setLoading=this.updater((n,s)=>Object.assign(Object.assign({},n),{loading:s})),this.loadPlanets=this.effect(n=>n.pipe((0,P.w)(s=>(this.setLoading(!0),this.planetService.list(null!=s?s:null).pipe((0,f.x)(()=>{this.setLoading(!1),this.setPaginatorDisabled(!1)}),(0,c._b)(o=>{this.setPlanets(o.results),this.setTotal(o.count),this.setNextPage(o.next),this.setPreviousPage(o.previous)},o=>{this.setPlanets([]),this.setTotal(0),this.setNextPage(null),this.setPreviousPage(null)})))))),this.nextPage=this.effect(n=>n.pipe((0,v.M)(this.nextPage$),(0,C.h)(([,s])=>null!==s),(0,Z.b)({next:([,s])=>{this.setPaginatorDisabled(!0),s&&this.loadPlanets(s)}}))),this.previousPage=this.effect(n=>n.pipe((0,v.M)(this.previousPage$),(0,C.h)(([,s])=>null!==s),(0,Z.b)({next:([,s])=>{this.setPaginatorDisabled(!0),s&&this.loadPlanets(s)}})))}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(u))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var g=l(7746),r=l(8583),O=l(2458);function S(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"mat-list-item",2),t.NdJ("click",function(){const o=t.CHM(a).$implicit;return t.oxw().clickedPlanet.emit(o)}),t._UZ(1,"img",3),t.TgZ(2,"h3",4),t._uU(3),t.qZA(),t.qZA()}if(2&e){const a=i.$implicit;t.xp6(3),t.Oqu(null==a?null:a.name)}}let b=(()=>{class e{constructor(){this.planets=[],this.clickedPlanet=new t.vpe}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-planet-list-presentational"]],inputs:{planets:"planets"},outputs:{clickedPlanet:"planet"},decls:2,vars:1,consts:[[1,"c-list"],["class","c-list__item",3,"click",4,"ngFor","ngForOf"],[1,"c-list__item",3,"click"],["matListAvatar","","alt","avatar","src","./assets/images/avatar.png"],["matLine",""]],template:function(a,n){1&a&&(t.TgZ(0,"mat-list",0),t.YNc(1,S,4,1,"mat-list-item",1),t.qZA()),2&a&&(t.xp6(1),t.Q6J("ngForOf",n.planets))},directives:[g.i$,r.sg,g.Tg,g.eA,O.X2],styles:[""],changeDetection:0}),e})();var T=l(7082),h=l(4885);function F(e,i){1&e&&(t.TgZ(0,"div",5),t._UZ(1,"mat-spinner",6),t.qZA()),2&e&&(t.xp6(1),t.Q6J("diameter",32))}let j=(()=>{class e{constructor(a,n){this.store=a,this.router=n,this.planets$=this.store.planets$,this.total$=this.store.total$,this.paginatorDisabled$=this.store.paginatorDisabled$,this.loading$=this.store.loading$}ngOnInit(){this.store.loadPlanets()}onPageChange(a){Number(a.previousPageIndex)>a.pageIndex?this.store.previousPage():this.store.nextPage()}onPlanet(a){const n=/.*\/(\d+)\/$/.exec(a.url);this.router.navigate(["planets",n[1]])}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(L),t.Y36(p.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-planet-list-container"]],features:[t._Bn([L])],decls:9,vars:14,consts:[[1,"h-100","d-flex","flex-column"],[1,"flex-grow",3,"planets","planet"],[1,"c-paginator"],["class","c-paginator__spinner",4,"ngIf"],[1,"c-paginator__paginator",3,"hidePageSize","pageSize","length","disabled","page"],[1,"c-paginator__spinner"],[3,"diameter"]],template:function(a,n){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"app-planet-list-presentational",1),t.NdJ("planet",function(o){return n.onPlanet(o)}),t.ALo(2,"async"),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,F,2,1,"div",3),t.ALo(5,"async"),t.TgZ(6,"mat-paginator",4),t.NdJ("page",function(o){return n.onPageChange(o)}),t.ALo(7,"async"),t.ALo(8,"async"),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(1),t.Q6J("planets",t.lcZ(2,6,n.planets$)),t.xp6(3),t.Q6J("ngIf",t.lcZ(5,8,n.loading$)),t.xp6(2),t.Q6J("hidePageSize",!0)("pageSize",10)("length",t.lcZ(7,10,n.total$))("disabled",t.lcZ(8,12,n.paginatorDisabled$)))},directives:[b,r.O5,T.NW,h.$g],pipes:[r.Ov],styles:[""],changeDetection:0}),e})(),U=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-planet-list-page"]],decls:3,vars:0,consts:[[1,"container","h-100"],[1,"pt-4","h-100"]],template:function(a,n){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"app-planet-list-container"),t.qZA(),t.qZA())},directives:[j],styles:[""],changeDetection:0}),e})();var J=l(8002);let $=(()=>{class e extends c.m1{constructor(a){super({planet:null,loading:!1}),this.planetService=a,this.planet$=this.select(({planet:n})=>n),this.loading$=this.select(({loading:n})=>n),this.setPlanet=this.updater((n,s)=>Object.assign(Object.assign({},n),{planet:s})),this.setLoading=this.updater((n,s)=>Object.assign(Object.assign({},n),{loading:s})),this.getPlanet=this.effect(n=>n.pipe((0,P.w)(s=>(this.setLoading(!0),this.planetService.getPlanet(s).pipe((0,f.x)(()=>this.setLoading(!1)),(0,c._b)(o=>this.setPlanet(o),o=>this.setPlanet(null)))))))}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(u))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var m=l(8295),y=l(9983);let M=(()=>{class e{constructor(){this.planet=null}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-planet-details-presentational"]],inputs:{planet:"planet"},decls:13,vars:3,consts:[[1,"c-planet-details__fields"],["matInput","","readonly","",3,"value"]],template:function(a,n){1&a&&(t.TgZ(0,"h1"),t._uU(1),t.qZA(),t.TgZ(2,"div",0),t.TgZ(3,"div"),t.TgZ(4,"mat-form-field"),t.TgZ(5,"mat-label"),t._uU(6,"Terrain"),t.qZA(),t._UZ(7,"input",1),t.qZA(),t.qZA(),t.TgZ(8,"div"),t.TgZ(9,"mat-form-field"),t.TgZ(10,"mat-label"),t._uU(11,"Population"),t.qZA(),t._UZ(12,"input",1),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(1),t.Oqu(null==n.planet?null:n.planet.name),t.xp6(6),t.Q6J("value",null==n.planet?null:n.planet.terrain),t.xp6(5),t.Q6J("value",null==n.planet?null:n.planet.population))},directives:[m.KE,m.hX,y.Nt],styles:[""],changeDetection:0}),e})();function z(e,i){1&e&&t._UZ(0,"mat-spinner",2),2&e&&t.Q6J("diameter",32)}let Q=(()=>{class e{constructor(a,n){this.store=a,this.activatedRoute=n,this.planet$=this.store.planet$,this.loading$=this.store.loading$}ngOnInit(){this.store.getPlanet(this.activatedRoute.paramMap.pipe((0,J.U)(a=>a.get("id"))))}}return e.\u0275fac=function(a){return new(a||e)(t.Y36($),t.Y36(p.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-planet-details-container"]],features:[t._Bn([$])],decls:4,vars:6,consts:[[3,"diameter",4,"ngIf"],[3,"planet"],[3,"diameter"]],template:function(a,n){1&a&&(t.YNc(0,z,1,1,"mat-spinner",0),t.ALo(1,"async"),t._UZ(2,"app-planet-details-presentational",1),t.ALo(3,"async")),2&a&&(t.Q6J("ngIf",t.lcZ(1,2,n.loading$)),t.xp6(2),t.Q6J("planet",t.lcZ(3,4,n.planet$)))},directives:[r.O5,M,h.$g],pipes:[r.Ov],styles:[""],changeDetection:0}),e})();const Y=[{path:"",component:U},{path:":id",component:(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-planet-details-page"]],decls:3,vars:0,consts:[[1,"container","h-100"],[1,"pt-4","h-100"]],template:function(a,n){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._UZ(2,"app-planet-details-container"),t.qZA(),t.qZA())},directives:[Q],styles:[""],changeDetection:0}),e})()}];let I=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.Bz.forChild(Y)],p.Bz]}),e})();var X=l(4466);const B=[g.ie,T.TU,m.lN,y.c,h.Cq];let R=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[u],imports:[[X.m,...B,I]]}),e})()}}]);